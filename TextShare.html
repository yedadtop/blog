<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>文本站</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body{font-family:'Segoe UI',system-ui;margin:0;padding:20px;background:#f8f9fa;color:#2d3436;line-height:1.6}
        form{max-width:800px;margin:0 auto 20px;background:white;padding:25px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.1)}
        textarea{width:100%;padding:18px 20px;border:2px solid #e0e0e0;border-radius:12px;resize:vertical;min-height:50px;max-height:100px;font-size:16px;background:#f8f9fa;box-sizing:border-box}
        .btn{background:#4CAF50;color:white;padding:12px 25px;border:none;border-radius:6px;cursor:pointer;font-size:16px;margin-top:15px}
        .hide_btn{background:transparent;border:none;color:transparent;margin-left:10px;cursor:pointer}
        .text-line{
            white-space: pre-wrap;
            word-break: break-word;
            cursor: pointer;
            padding: 15px;
            margin: 10px 0;
            background: #f8f9fa;
            border-radius: 6px;
            transition: background .2s;
            user-select: text;          /* 允许选中 */
        }
        .text-line:hover{background:#e9ecef}
        #displayText{max-width:800px;margin:0 auto;background:white;padding:25px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.1)}
        @media (max-width:768px){body{padding:10px}img{max-width:100%;height:auto}}
    </style>
</head>
<body>

<form id="textForm" method="post">
    <textarea name="content" id="content" rows="10" placeholder="在此输入文本，支持换行"></textarea><br>
    <button type="submit" class="btn">上传文本</button>
    <button type="button" id="clearTextButton" class="hide_btn">清除文本</button>
</form>

<div id="displayText">
<div class="text-line">【微信和QQ】上线！和平精英开黑就等你了！（整段复制后打开邀请组队列表或在跨平台组队功能手动粘贴加入队伍）J6QN119Qhttps://agp.qq.com/lq/lq.htm?y.cGdtOjEwNA==&amp;tk=J6QN119Q ZH1356 ₩3559</div></div>

<script>
/* -------- 上传前非空检查 -------- */
document.getElementById('textForm').addEventListener('submit', e => {
    if (document.getElementById('content').value.trim() === '') {
        alert('文本不能为空！');
        e.preventDefault();
    }
});

/* -------- 清空 -------- */
document.getElementById('clearTextButton').addEventListener('click', () => {
    if (confirm('确定要清除所有文本吗？')) {
        const f = document.createElement('form');
        f.method = 'post';
        f.innerHTML = '<input type="hidden" name="clearText" value="1">';
        document.body.appendChild(f);
        f.submit();
    }
});

/* -------- 复制功能：简单直接绑定 -------- */
document.querySelectorAll('.text-line').forEach(el => {
    el.addEventListener('click', () => {
        // 兼容写法
        const text = el.textContent || el.innerText || '';
        if (navigator.clipboard && window.isSecureContext) {
            navigator.clipboard.writeText(text).then(() => showTip());
        } else {
            // 降级：选中 + document.execCommand
            const range = document.createRange();
            range.selectNode(el);
            window.getSelection().removeAllRanges();
            window.getSelection().addRange(range);
            document.execCommand('copy');
            window.getSelection().removeAllRanges();
            showTip();
        }

        function showTip() {
            const tip = document.createElement('div');
            Object.assign(tip.style, {
                position: 'fixed', left: '50%', bottom: '20px',
                transform: 'translateX(-50%)',
                background: '#4CAF50', color: '#fff',
                padding: '10px 20px', borderRadius: '20px'
            });
            tip.textContent = '已复制到剪贴板';
            document.body.appendChild(tip);
            setTimeout(() => document.body.removeChild(tip), 1500);
        }
    });
});
</script>

</body>
</html>
